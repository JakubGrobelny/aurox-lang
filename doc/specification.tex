\documentclass[12pt]{article}
\usepackage[polish]{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{syntax}

\setlength{\grammarindent}{5em}

\title{\huge
    \textbf{Statycznie typowany funkcyjny język programowania}}
\date {Kurs języka Prolog (Q1) -- projekt końcowy}
\author{\Large Jakub Grobelny}

\begin{document}

\maketitle

\section{Struktura leksykalna i składnia}

Klasyfikacja znaków:
\begin{itemize}
    \item \textit{biały znak} --- znaki ASCII: HT, LF, CR, LF, SPACE
    \item \textit{cyfra} --- znaki ASCII: 0-9
    \item \textit{mała litera} --- znaki Unicode będące małymi literami 
    \footnote{Wszystkie takie znaki \textbf{X}, że spełniony jest predykat 
        \texttt{char\textunderscore type(X,lower)} w SWI Prologu.}
    \item \textit{wielka litera} --- znaki Unicode będące wielkimi literami
    \footnote{Analogicznie jak wyżej, tylko 
        \texttt{char\textunderscore type(X, upper)}.}
\end{itemize}

\subsection{Struktura leksykalna}

\textit{Komentarz} to ciąg znaków rozpoczynających się znakiem \texttt{\#}, 
zakończony znakiem nowej linii.

\textit{Token} to najdłuższy ciąg znaków niezawierający \textit{komentarzy} ani 
\textit{białych znaków}, taki, że opisuje go poniższa gramatyka:

\begin{grammar}

<literał-całkowitoliczbowy> ::=
    \textit{cyfra} 
    \alt \textit{cyfra} <literał-całkowitoliczbowy>

<literał-znakowy> ::=
    \textbf{''}
    \alt \textbf{'} <znak> \textbf{'}

<literał-napisowy> ::=
    \textbf{"\"\""}
    \alt \textbf{\"} <ciąg-znaków> \textbf{\"}

<literał-zmiennopozycyjny> ::=
    <ułamek>
    \alt <ułamek> <wykładnik>

<literał-boolowski> ::=
    \textbf{true}
    | \textbf{false}

<słowo-kluczowe> ::=
    \textbf{let}
    | \textbf{and}
    | \textbf{in}
    | \textbf{if}
    | \textbf{then}
    \alt \textbf{match}
    | \textbf{else}
    | \textbf{with}
    | \textbf{type}
    | \textbf{of}
    | \textbf{where}
    \alt \textbf{import}
    | \textbf{fun}
    | \textbf{define}

<operator> ::= <znak-specjalny> | <operator> <znak-specjalny>

<identifikator> ::= 
    \textit{mała litera} <alfanum>, taki, że nie jest <słowo-kluczowe>
    \alt \textit{mała litera}

<nazwa-typu> ::=
    \textit{wielka litera} <alfanum>
    \alt \textit{wielka litera}

\end{grammar}

gdzie\\

\begin{grammar}

<znak-specjalny> ::=
    \textbf{+}
    | \textbf{\texttt{-}}
    | \textbf{\texttt{*}}
    | \textbf{\texttt{/}}
    | \textbf{\texttt{=}}
    | \textbf{\texttt{:}}
    | \textbf{\texttt{\textgreater}}
    \alt \textbf{\texttt{\textless}}
    | \textbf{\&}
    | \textbf{\texttt{!}}
    | \textbf{\texttt{|}}
    | \textbf{\texttt{\$}}
    | \textbf{\texttt{@}}
    | \textbf{\texttt{\%}}
    | \textbf{\texttt{\^}}
    | \textbf{\texttt{\~}}

<znak> ::= 
    \textit{dowolny znak Unicode oprócz 
        \textbf{"\\"}, \textbf{"\""}, \textbf{"\'"}}
    \alt \textbf{"\\"n}\,
    | \textbf{"\\"b}\,
    | \textbf{"\\"f}\,
    | \textbf{"\\"a}\,
    | \textbf{"\\"r}\,
    | \textbf{"\\"t}\,
    | \textbf{"\\0"}\,
    | \textbf{"\\"v}\,
    | \textbf{"\\\\"}\,
    | \textbf{"\\"'}\,
    | \textbf{"\\\""}\,

<ciąg-znaków> ::=
    <znak>
    \alt <ciąg-znaków> <znak>

<litera> ::=
    \textit{mała litera}
    \alt \textit{wielka litera}

<alfanum> ::=
    <litera>
    \alt <cyfra>
    \alt <alfanum> <litera>
    \alt <alfanum> <cyfra>

<ułamek> ::=
    <literał-całkowitoliczbowy> \textbf{.} <literał-całkowitoliczbowy>
    \alt <literał-całkowitoliczbowy>

<wykładnik> ::=
    \textbf{e} \textbf{-} <literał-całkowitoliczbowy>
    \alt \textbf{e} <literał-całkowitoliczbowy>

\end{grammar}

\subsection{Składnia}

\begin{grammar}

<program> ::=
    <wyrażenie-lub-definicja>
    \alt <wyrażenie-lub-definicja> <program>

<wyrażenie-lub-definicja> ::=
    <wyrażenie>
    \alt <define-definicja>
    \alt <defun-definicja>
    \alt <type-definicja>
    \alt <import>

<literał-funkcyjny> ::=
    \textbf{\{} \texttt{|} <lista-parametrów> \texttt{|} <wyrażenie> \textbf{\}}

<lista-parametrów> ::=
    <identyfikator>
    \alt \textbf{_}
    \alt \textbf{_} <lista-parametrów>
    \alt <identyfikator> <lista-parametrów>

<stała> ::=
    <literał-całkowitoliczbowy>
    \alt <literał-zmiennopozycyjny>
    \alt <literał-napisowy>
    \alt <literał-znakowy>
    \alt <literał-funkcyjny>
    \alt \textbf{(\,)}

<wyrażenie-atomowe> ::=
    \textbf{(} <wyrażenie> \textbf{)}
    \textbf{(} <operator> \textbf{)}
    \alt <identyfikator>
    \alt <nazwa-typu>
    \alt <stała>

<wyrażenie-warunkowe> ::=
    \textbf{if} <wyrażenie>
    \textbf{then} <wyrażenie>
    \textbf{else} <wyrażenie>

<dopasowanie-do-wzorca> ::=
    \textbf{match} <wyrażenie> \textbf{\{}
    <lista-wzorców> \textbf{\}}

<lista-wzorców> ::= $\epsilon$
    \alt \textbf{case} <wzorzec> \texttt{=>} <wyrażenie> <lista-wzorców>

<wzorzec> ::=
    <wzorzec-atomowy>
    \alt <aplikacja-konstruktora>

<aplikacja-konstruktora> ::=
    <nazwa-typu> <wzorzec-atomowy>
    \alt <nazwa-typu>

<wzorzec-atomowy> ::=
    <stała>
    \alt <identyfikator>
    \alt \textbf{(} <krotka-wzorców> \textbf{)}
    \alt <wzorzec-listowy>

<krotka-wzorców> ::=
    <wzorzec>
    \alt <wzorzec> \textbf{,} <krotka-wzorców>

<wzorzec-listowy> ::=
    \textbf{[\,]}
    \alt \textbf{[} <krotka-wzorców> \textbf{]}
    \alt \textbf{[} <krotka-wzorców> \texttt{|} <identyfikator> \textbf{]}

<deklaracja-operatora> ::=
    \textbf{defop \{} <operator> <priorytet> <łączność> \textbf{\}}

<priorytet> ::=
    \textbf{0} | \textbf{1} | \textbf{2} | \textbf{3} | \textbf{4} | \textbf{5}

<łączność> ::=
    \textbf{left}
    \alt \textbf{right}
    \alt \textbf{none}
    \alt \textbf{left_unary}
    \alt \textbf{right_unary}

<import> ::=
    \textbf{import} \textbf{\{} <pliki-do-importowania> \textbf{\}}

<pliki-do-importowania> ::=
    <nazwa-pliku>
    \alt <nazwa-pliku> <pliki-do-importowania>

<nazwa-pliku> ::=
    <literał-napisowy>
    \alt <nazwa-typu>

<lista> ::=
    \textbf{[\,]}
    \alt \textbf{[} <krotka> \textbf{]}
    \alt \textbf{[} <krotka> \texttt{|} <wyrażenie> \textbf{]}

<let-definicja> ::=
    \textbf{let} <definicja> <and-definicje>
    \textbf{in} \textbf{\{} <wyrażenie> \textbf{\}} 

<definicja> ::=
    <identyfikator> \textbf{:} <typ> \textbf{=} <wyrażenie>

<define-definicja> ::=
    \textbf{define} <definicja> \textbf{\{} <wyrażenie> \textbf{\}}

<defun-definicja> ::=
    \textbf{defun} <nazwa-funkcji> <lista-parametrów> \textbf{:} <typ> 
    \textbf{= \{} <wyrażenie> \textbf{\}}

<nazwa-funkcji> ::=
    <identifikator>
    \alt \textbf{(} <operator> \textbf{)}

<type-definicja> ::=
    \textbf{type} <nazwa-typu> 
    \textbf{:} <lista-parametrów> <ciało-typu>
    \alt \textbf{type} <nazwa-typu> <ciało-typu>

<ciało-typu> ::= 
    \textbf{\{} <lista-konstruktorów> \textbf{\}}

<lista-konstruktorów> ::=
    $\epsilon$
    \alt <lista-konstruktorów> <konstruktor>

<konstruktor> ::=
    <nazwa-typu>
    \alt <nazwa-typu> \textbf{: \{} <typ> \textbf{\}}
    
<typ> ::=
    <funkcja>
    \alt <funkcja> \textbf{,} <typ>

<funkcja> ::= 
    <typ-algebraiczny>
    \alt <typ-algebraiczny> \texttt{->} <funkcja>

<typ-algebraiczny> ::=
    <typ-atomowy>
    \alt <nazwa-typu> <lista-typów-atomowych>

<lista-typów-atomowych> ::=
    <typ-atomowy>
    \alt <typ-atomowy> <lista-typów-atomowych>

<typ-atomowy> ::=
    <identifikator>
    \alt <nazwa-typu>
    \alt \textbf{(} <typ> \textbf{)}
    \alt \textbf{[} <typ> \textbf{]}

<and-definicje> ::=
    $\epsilon$
    \alt \textbf{and} <definicja> <and-definicje>

<wyrażenie> ::=
    <sekwencja-wyrażeń>
    \alt <dopasowanie-do-wzorca>
    \alt <let-definicja>
    \alt <wyrażenie-warunkowe>

<sekwencja-wyrażeń> ::=
    <krotka>
    \alt <krotka> \textbf{;} <sekwencja-wyrażeń>

<krotka> ::=
    <wn>
    \alt <wn> \textbf{,} <krotka>

<w0n> ::=
    <w0r>
    \alt <w0r> <w0n_op> <w0r>

<w0r> ::=
    <w0l>
    \alt <w0l> <w0r_op> <w0r>

<w0l> ::=
    <w0ul>
    \alt <w0l> <w0l_op> <w0ur>

<w0ur> ::=
    <w0ul>
    \alt <w0ul> <w0ur_op> 
    
<w0ul> ::=
    <w1n>
    \alt <w1ul_op> <w1n>

<w1n> ::=
    <w1r>
    \alt <w1r> <w1n_op> <w1r>

<w1r> ::=
    <w1l>
    \alt <w1l> <w1r_op> <w1r>

<w1l> ::=
    <w1ul>
    \alt <w1l> <w1l_op> <w1ur>

<w1ur> ::=
    <w1ul>
    \alt <w1ul> <w1ur_op> 
    
<w1ul> ::=
    <w2n>
    \alt <w1ul_op> <w2n>

<w2n> ::=
    <w2r>
    \alt <w2r> <w2n_op> <w2r>

<w2r> ::=
    <w2l>
    \alt <w2l> <w2r_op> <w2r>

<w2l> ::=
    <w2ul>
    \alt <w2l> <w2l_op> <w2ur>

<w2ur> ::=
    <w2ul>
    \alt <w2ul> <w2ur_op> 
    
<w2ul> ::=
    <w3n>
    \alt <w2ul_op> <w3n>

    <w3n> ::=
    <w3r>
    \alt <w3r> <w3n_op> <w3r>

<w3r> ::=
    <w3l>
    \alt <w3l> <w3r_op> <w3r>

<w3l> ::=
    <w3ul>
    \alt <w3l> <w3l_op> <w3ur>

<w3ur> ::=
    <w3ul>
    \alt <w3ul> <w3ur_op> 
    
<w3ul> ::=
    <w4n>
    \alt <w3ul_op> <w4n>

<w4n> ::=
    <w4r>
    \alt <w4r> <w4n_op> <w4r>

<w4r> ::=
    <w4l>
    \alt <w4l> <w4r_op> <w4r>

<w4l> ::=
    <w4ul>
    \alt <w4l> <w4l_op> <w4ur>

<w4ur> ::=
    <w4ul>
    \alt <w4ul> <w4ur_op> 
    
<w4ul> ::=
    <w5n>
    \alt <w4ul_op> <w5n>

<w5n> ::=
    <w5r>
    \alt <w5r> <w5n_op> <w5r>

<w5r> ::=
    <w5l>
    \alt <w5l> <w5r_op> <w5r>

<w5l> ::=
    <w5ul>
    \alt <w5l> <w5l_op> <w5ur>

<w5ur> ::=
    <w5ul>
    \alt <w5ul> <w5ur_op>
    
<w5ul> ::=
    <aplikacja>
    \alt <w5ul_op> <aplikacja>

<aplikacja> ::=
    <aplikacja> <wyrażenie-atomowe>
    \alt <wyrażenie-atomowe>

<.*_op> ::= 
    <operator>
    \footnote{
        Operatory i ich priorytety oraz 
        łączność są definiowane wewnątrz programów
        i nie istnieje dla nich gramatyka bezkontekstowa.
    }



\end{grammar}

\section{Semantyka}

\section{System typów}

\end{document}